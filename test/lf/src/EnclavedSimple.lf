target uC {
  platform: Native
}

reactor R(id: int = 0){
  state test: bool = false
  reaction(startup) {=
    printf("Hello From Enclave %d\n", self->id);
    self->test = true;
    env->request_shutdown(env);
  =}

  reaction(shutdown) {=
    validate(self->test);
  =}
}

main enclaved reactor {
  e1 = new R(id=1)
  e2 = new R(id=2)
}